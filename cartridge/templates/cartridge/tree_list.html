{% extends 'cartridge/base.html' %}

{% block title %}Помещения{% endblock %}

{% block submenu %}Справочники / Помещения{% endblock %}

{% block content %}
    <div class="row">
        <div class="large-4 columns" style="display: {{ display }}">
            <ul class="success_msg" style="display: {{ msg_display }}">
                <li class="success">Помещение "{{ name }}" успешно создано.</li>
            </ul>
            <ul class="error_msg" style="display: {{ err_display }}">
                <li class="success">{{ error }}</li>
            </ul>
        </div>
    </div>
    <form action="" method="POST">
        <div class="row">
            {% csrf_token %}
            <div class="large-4 columns">
                <div class="marginTop wrapper-manual-number">
                    <label class="required">Штрихкод:</label>
                    <input type="number" name="barcode" value="{{ random_num }}" id="id_barcode">
                </div>
                <div class="marginTop"></div>
                <label class="required">Название помещения:</label>
                {{ form.name }}
                <div class="marginTop"></div>
                <label>Корпус:</label>
                {{ form.branch }}
                <div class="marginTop"></div>
            </div>
        </div>
        <div class="row marginTop">
            <div class="row">
                <div class="small-4 columns">
                    <label class="marginTop">Ручная ввод номера</label>
                    <div class="myswitch">
                        <input id="cmn-toggle-1" class="cmn-toggle-1 cmn-toggle cmn-toggle-round" type="checkbox">
                        <label for="cmn-toggle-1" class="set_date"></label>
                    </div>
                </div>
            </div>
        </div>
        <div class="row marginTop">
            <div class="large-12 columns">
                <a href="{% url 'add_items' %}" class="button">Вернуться</a>
                <button class="button success" type="submit">Добавить</button>
                <a class="button no_follow edit_node" href="#">Редактировать</a>
                <a class="button alert del_node">Удалить</a>
            </div>
        </div>
    </form>
    <form action="{% url 'print_pl' %}" method="post" style="padding-left: 16px">
        {% csrf_token %}
        <div class="marginTop">
            <button type="submit" class="button" formtarget="_blank" style="position: relative; left: 442px; top: -41px;">Сформировать PDF</button>
        </div>
           <div class="marginTop" style="border: 1px solid #d4d4d4; width: 1053px">
            <div class="large-10">
                <div class="grid1675336387607" id="grid1">
                    <!-- TODO (c0bra): add "scoped" attr here, eventually? -->
                    <style class="ng-binding">
                        {#.grid1675336387607 {#}
                        {#    height: calc(107px + ({{ count }} * 33px));#}
                        {#    width: 1050px;#}

                        .grid1675336387607 .ui-grid-row, .grid1675336387607 .ui-grid-cell {
                            height: 33px;
                        }

                        .grid1675336387607 .ui-grid-coluiGrid-0007 {
                            min-width: 250px;
                            max-width: 250px;
                        }

                        .grid1675336387607 .ui-grid-coluiGrid-0008 {
                            min-width: 340px;
                            max-width: 340px;
                        }

                        .grid1675336387607 .ui-grid-coluiGrid-000H {
                            min-width: 40px;
                            max-width: 40px;
                        }
                    </style>
                    <div class="ui-grid-contents-wrapper">
                        <div class="ui-grid-header">
                            <!-- theader -->
                            <div class="ui-grid-top-panel">
                                <div class="ui-grid-header-viewport">
                                    <div class="ui-grid-header-cell-wrapper">
                                        <div class="ui-grid-header-cell-row">
                                            <div class="ui-grid-cell ui-grid-coluiGrid-000H">
                                                <div class="ui-grid-cell-contents">
                                                    <input id="select_all" type="checkbox" class="ui-grid-cell-contents-checkbox">
                                                </div>
                                            </div>
                                            <!-- ngRepeat: col in colContainer.renderedColumns track by col.uid -->
                                            <div class="ui-grid-header-cell ui-grid-coluiGrid-0007">
                                                <span class="ui-grid-header-cell-label">Штрихкод</span>
                                                <!-- ngRepeat: colFilter in col.filters -->
                                                <div>
                                                    <div class="ui-grid-filter-container">
                                                        <!-- ngIf: colFilter.type !== 'select' -->
                                                        <input type="text" class="ui-grid-filter-input" aria-label="Фильтр столбца" placeholder="">
                                                        <!-- ngIf: !colFilter.disableCancelFilterButton -->
                                                        <div class="ui-grid-filter-button" disabled="disabled">
                                                            <i class="ui-grid-icon-cancel" aria-label="Удалить фильтр"></i>
                                                        </div>
                                                        <!-- end ngIf: !colFilter.disableCancelFilterButton -->
                                                    </div>
                                                </div>
                                                <!-- end ngRepeat: colFilter in col.filters -->

                                            </div>
                                            <!-- end ngRepeat: col in colContainer.renderedColumns track by col.uid -->
                                            <div class="ui-grid-header-cell ui-grid-coluiGrid-0008">
                                                <div class="ui-grid-cell-contents">
                                                    <span class="ui-grid-header-cell-label">Название</span>
                                                </div>
                                                <!-- ngRepeat: colFilter in col.filters -->
                                                <div class="ui-grid-filter-container">
                                                    <!-- ngIf: colFilter.type !== 'select' -->
                                                    <input type="text" class="ui-grid-filter-input" aria-label="Фильтр столбца" placeholder="">
                                                    <!-- ngIf: !colFilter.disableCancelFilterButton -->
                                                    <div role="button" class="ui-grid-filter-button" disabled="disabled">
                                                        <i class="ui-grid-icon-cancel" aria-label="Удалить фильтр"></i>
                                                    </div>
                                                    <!-- end ngIf: !colFilter.disableCancelFilterButton -->
                                                </div>
                                                <!-- end ngRepeat: colFilter in col.filters -->
                                            </div>
                                            <!-- end ngRepeat: col in colContainer.renderedColumns track by col.uid -->
                                            <div class="ui-grid-header-cell ui-grid-coluiGrid-0008">
                                                <div class="ui-grid-cell-contents">
                                                    <span class="ui-grid-header-cell-label">Корпус</span>
                                                </div>
                                                <!-- ngRepeat: colFilter in col.filters -->
                                                <div class="ui-grid-filter-container">
                                                    <!-- ngIf: colFilter.type !== 'select' -->
                                                    <input type="text" class="ui-grid-filter-input" aria-label="Фильтр столбца" placeholder="">
                                                    <!-- ngIf: !colFilter.disableCancelFilterButton -->
                                                    <div role="button" class="ui-grid-filter-button" disabled="disabled">
                                                        <i class="ui-grid-icon-cancel" aria-label="Удалить фильтр"></i>
                                                    </div>
                                                    <!-- end ngIf: !colFilter.disableCancelFilterButton -->
                                                </div>
                                                <!-- end ngRepeat: colFilter in col.filters -->
                                            </div>
                                            <!-- end ngRepeat: col in colContainer.renderedColumns track by col.uid -->
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ui-grid-viewport" style="width: 1050px; height: 500px; overflow-y: scroll;">
                        <!-- tbody -->
                        <div class="ui-grid-canvas" id="table">

                            {% if place %}
                                <!-- ngRepeat: (rowRenderIndex, row) in rowContainer.renderedRows track by $index -->
                                {% for el in place %}
                                    <div class="ui-grid-row">
                                        <div class="ui-grid-cell ui-grid-coluiGrid-000H">
                                            <div class="ui-grid-cell-contents">
                                                <input name="check" class="ui-grid-cell-contents-checkbox" type="checkbox" value="{{ el.barcode }}">
                                            </div>
                                        </div>
                                        <!-- ngRepeat: (colRenderIndex, col) in colContainer.renderedColumns track by col.uid -->
                                        <div class="ui-grid-cell ui-grid-coluiGrid-0007">
                                            <div class="ui-grid-cell-contents">{{ el.barcode }}</div>
                                        </div>
                                        <!-- end ngRepeat: (colRenderIndex, col) in colContainer.renderedColumns track by col.uid -->
                                        <div class="ui-grid-cell ui-grid-coluiGrid-0008">
                                            <span class="ui-grid-cell-contents">{{ el.name }}</span>
                                        </div>
                                        <!-- end ngRepeat: (colRenderIndex, col) in colContainer.renderedColumns track by col.uid -->
                                        <div class="ui-grid-cell ui-grid-coluiGrid-0008">
                                            <div class="ui-grid-cell-contents">{{ el.branch }}</div>
                                        </div>
                                        <!-- end ngRepeat: (colRenderIndex, col) in colContainer.renderedColumns track by col.uid -->
                                    </div>
                                {% endfor %}
                            {% endif %}
                            <!-- end ngRepeat: (rowRenderIndex, row) in rowContainer.renderedRows track by $index -->

                        </div>
                    </div>
                </div>


            </div>
        </div>
        <div class="ui-grid-pager-panel" style="width: 100%; height: 20px; position: absolute; bottom: 40px;">
            <div class="ui-grid-pager-count-container">
                <div class="ui-grid-pager-count">
                    <span class="ng-binding">Всего {{ count }} строк</span>
                </div>
            </div>
        </div>
    </form>
    <script>

        var select_all = document.getElementById("select_all"); //select all checkbox
        var checkboxes = document.getElementsByName("check");
        //checkbox items

        //select all checkboxes
        select_all.addEventListener("change", function (e) {
            for (i = 0; i < checkboxes.length; i++) {
                checkboxes[i].checked = select_all.checked;
            }
        });
        for (var i = 0; i < checkboxes.length; i++) {
            checkboxes[i].addEventListener('change', function (e) { //".checkbox" change
                //uncheck "select all", if one of the listed checkbox item is unchecked
                if (this.checked === false) {
                    select_all.checked = false;
                }
                //check "select all" if all checkbox items are checked
                if (document.querySelectorAll('.checkbox:checked').length === checkboxes.length) {
                    select_all.checked = true;
                }
            });
        }
    </script>
{% endblock %}
