{% extends 'cartridge/base.html' %}

{% block title %}Помещения{% endblock %}

{% block submenu %}Справочники / Помещения{% endblock %}

{% block content %}
    <div class="row">
        <div class="large-4 columns" style="display: {{ display }}">
            <ul class="success_msg" style="display: {{ msg_display }}">
                <li class="success">Помещение "{{ name }}" успешно создано.</li>
            </ul>
            <ul class="error_msg" style="display: {{ err_display }}">
                <li class="success">{{ error }}</li>
            </ul>
        </div>
    </div>

    <div ng-controller="MainCtrl" class="ng-scope">
        <div class="row">
            <form action="" method="POST">
                {% csrf_token %}
                <div class="large-4 columns">
                    <label class="required">Штрихкод:</label>
                    {{ form.barcode }}

                    <div class="marginTop"></div>
                    <label class="required">Название помещения:</label>
                    {{ form.name }}

                    <div class="marginTop"></div>
                    <label>Корпус:</label>
                    {{ form.branch }}
                    <div class="marginTop"></div>
                </div>
                <div class="row marginTop">
                    <div class="large-12 columns" style="padding-left: 30px;">
                        <button class="button success" type="submit">Добавить</button>
                        <a class="button no_follow edit_node" href="#">Редактировать</a>

                        <a href="{% url 'add_items' %}" class="button">Вернуться</a>

                        <a class="button alert del_node" >Удалить</a>
                        <img class="spinner" src="static/img/loader.gif">
                    </div>
            </form>
        </div>
    </div>
    <div class="row marginTop">
        <div class="large-12 columns ">
            <div class="ui-grid grid1675336387607" id="grid1">
                <!-- TODO (c0bra): add "scoped" attr here, eventually? -->
                <style class="ng-binding">
                    .grid1675336387607 {
                        height: calc(107px + ({{ count }}* 33px));
                    }

                    .grid1675336387607 .ui-grid-row, .grid1675336387607 .ui-grid-cell, .grid1675336387607 .ui-grid-cell {
                        height: 33px;
                    }

                    .grid1675336387607 .ui-grid-row:last-child .ui-grid-cell {
                        border-bottom-width: 1px;
                    }

                    .grid1675336387607 .ui-grid-coluiGrid-0006 {
                        min-width: 600px;
                        max-width: 600px;
                    }

                    .grid1675336387607 .ui-grid-coluiGrid-0007 {
                        min-width: 250px;
                        max-width: 250px;
                    }

                    .grid1675336387607 .ui-grid-coluiGrid-0008 {
                        min-width: 400px;
                        max-width: 400px;
                    }

                </style>
                <div class="ui-grid-contents-wrapper">
                    <!-- ngIf: grid.options.enableGridMenu -->
                    <!-- ngIf: grid.hasLeftContainer() -->
                    <div class="ui-grid-render-container">
                        <!-- All of these dom elements are replaced in place -->
                        <div class="ui-grid-header">
                            <!-- theader -->
                            <div class="ui-grid-top-panel">
                                <div class="ui-grid-header-viewport">
                                    <div class="ui-grid-header-canvas">
                                        <div class="ui-grid-header-cell-wrapper">
                                            <div role="row" class="ui-grid-header-cell-row">
                                                <!-- ngRepeat: col in colContainer.renderedColumns track by col.uid -->
                                                <div class="ui-grid-header-cell ui-grid-coluiGrid-0007">
                                                    <div role="button" tabindex="0" class="ui-grid-cell-contents">
                                                        <span class="ui-grid-header-cell-label" id="1675336387607-uiGrid-0007-header-text">Штрихкод</span>
                                                        <!-- ngRepeat: colFilter in col.filters -->
                                                        <div class="ui-grid-filter-container">
                                                            <!-- ngIf: colFilter.type !== 'select' -->
                                                            <input type="text" class="ui-grid-filter-input" aria-label="Фильтр столбца" placeholder="">
                                                            <!-- ngIf: !colFilter.disableCancelFilterButton -->
                                                            <div role="button" class="ui-grid-filter-button" disabled="disabled">
                                                                <i class="ui-grid-icon-cancel" aria-label="Удалить фильтр"></i>
                                                            </div>
                                                            <!-- end ngIf: !colFilter.disableCancelFilterButton -->
                                                        </div>
                                                        <!-- end ngRepeat: colFilter in col.filters -->
                                                    </div>
                                                </div>
                                                <!-- end ngRepeat: col in colContainer.renderedColumns track by col.uid -->
                                                <div class="ui-grid-header-cell ui-grid-coluiGrid-0006">
                                                    <div role="button" tabindex="0" class="ui-grid-cell-contents">
                                                        <span class="ui-grid-header-cell-label" id="1675336387607-uiGrid-0006-header-text">Название</span>
                                                    </div>
                                                    <!-- ngRepeat: colFilter in col.filters -->
                                                    <div class="ui-grid-filter-container">
                                                        <!-- ngIf: colFilter.type !== 'select' -->
                                                        <input type="text" class="ui-grid-filter-input" aria-label="Фильтр столбца" placeholder="">
                                                        <!-- ngIf: !colFilter.disableCancelFilterButton -->
                                                        <div role="button" class="ui-grid-filter-button" disabled="disabled">
                                                            <i class="ui-grid-icon-cancel" aria-label="Удалить фильтр"></i>
                                                        </div>
                                                        <!-- end ngIf: !colFilter.disableCancelFilterButton -->
                                                    </div>
                                                    <!-- end ngRepeat: colFilter in col.filters -->
                                                </div>
                                                <!-- end ngRepeat: col in colContainer.renderedColumns track by col.uid -->
                                                <div class="ui-grid-header-cell ui-grid-coluiGrid-0008">
                                                    <div role="button" tabindex="0" class="ui-grid-cell-contents">
                                                        <span class="ui-grid-header-cell-label" id="1675336387607-uiGrid-0008-header-text">Корпус</span>
                                                    </div>
                                                    <!-- ngRepeat: colFilter in col.filters -->
                                                    <div class="ui-grid-filter-container">
                                                        <!-- ngIf: colFilter.type !== 'select' -->
                                                        <input type="text" class="ui-grid-filter-input" aria-label="Фильтр столбца" placeholder="">
                                                        <!-- ngIf: !colFilter.disableCancelFilterButton -->
                                                        <div role="button" class="ui-grid-filter-button" disabled="disabled">
                                                            <i class="ui-grid-icon-cancel" aria-label="Удалить фильтр"></i>
                                                        </div>
                                                        <!-- end ngIf: !colFilter.disableCancelFilterButton -->
                                                    </div>
                                                    <!-- end ngRepeat: colFilter in col.filters -->
                                                </div>
                                                <!-- end ngRepeat: col in colContainer.renderedColumns track by col.uid -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="ui-grid-viewport" style="overflow: hidden;">
                            <!-- tbody -->
                            <div class="ui-grid-canvas">
                                {% if place %}
                                    <!-- ngRepeat: (rowRenderIndex, row) in rowContainer.renderedRows track by $index -->
                                    {% for el in place %}
                                        <div class="ui-grid-row ng-scope">

                                            <!-- ngRepeat: (colRenderIndex, col) in colContainer.renderedColumns track by col.uid -->
                                            <div class="ui-grid-cell ui-grid-coluiGrid-0007" id="1675770373642-0-uiGrid-0007-cell">
                                                <div class="ui-grid-cell-contents">{{ el.barcode }}</div>
                                            </div>
                                            <!-- end ngRepeat: (colRenderIndex, col) in colContainer.renderedColumns track by col.uid -->
                                            <div class="ui-grid-cell ui-grid-coluiGrid-0006" id="1675770373642-0-uiGrid-0006-cell">
                                                <p class="ng-scope">
                                                    <span class="ou_5">{{ el.name }}</span>
                                                </p>
                                            </div>
                                            <!-- end ngRepeat: (colRenderIndex, col) in colContainer.renderedColumns track by col.uid -->
                                            <div class="ui-grid-cell ui-grid-coluiGrid-0006" id="1675770373642-0-uiGrid-0008-cell">
                                                <div class="ui-grid-cell-contents">{{ el.branch }}</div>
                                            </div>
                                            <!-- end ngRepeat: (colRenderIndex, col) in colContainer.renderedColumns track by col.uid -->
                                        </div>
                                    {% endfor %}
                                {% endif %}
                                <!-- end ngRepeat: (rowRenderIndex, row) in rowContainer.renderedRows track by $index -->
                            </div>
                        </div>
                        <!-- ngIf: colContainer.needsHScrollbarPlaceholder() -->
                        <!-- ngIf: grid.options.showColumnFooter -->
                    </div>

                </div>
                <div class="ui-grid-pager-panel">
                    <div class="ui-grid-pager-container">
                        <div class="ui-grid-pager-control">
                            <button type="button" class="ui-grid-pager-first" title="Первая страница" aria-label="Первая страница" disabled="disabled">
                                <div class="first-triangle">
                                    <div class="first-bar"></div>
                                </div>
                            </button>
                            <button type="button" class="ui-grid-pager-previous" title="Предыдущая страница" aria-label="Предыдущая страница"
                                    disabled="disabled">
                                <div class="first-triangle prev-triangle"></div>
                            </button>
                            <input type="number" class="ui-grid-pager-control-input" title="Выбранная страница" aria-label="Выбранная страница">
                            <span class="ui-grid-pager-max-pages-number">
                                <abbr title="из">/ </abbr>1
                            </span>
                            <button type="button" class="ui-grid-pager-next" title="Следующая страница" aria-label="Следующая страница" disabled="disabled">
                                <div class="last-triangle"></div>
                            </button>
                            <button type="button" class="ui-grid-pager-last" title="Последняя страница" aria-label="Последняя страница" disabled="disabled">
                                <div class="last-triangle">
                                    <div class="last-bar"></div>
                                </div>
                            </button>
                        </div>
                        <!-- ngIf: grid.options.paginationPageSizes.length > 1 && !grid.options.useCustomPagination -->
                        <div class="ui-grid-pager-row-count-picker">
                            <select class="ng-pristine ng-untouched ng-valid ng-not-empty" aria-labelledby="1675336387607-items-per-page-label">
                                <option label="12" value="number:12" selected="selected">12</option>
                                <option label="24" value="number:24">24</option>
                                <option label="48" value="number:48">48</option>
                                <option label="100000" value="number:100000">100000</option>
                            </select>
                        </div>
                        <!-- end ngIf: grid.options.paginationPageSizes.length > 1 && !grid.options.useCustomPagination -->
                        <!-- ngIf: grid.options.paginationPageSizes.length <= 1 -->
                    </div>
                    <div class="ui-grid-pager-count-container">
                        <div class="ui-grid-pager-count">
                            <span class="ng-binding" style="">1<abbr title="по">- </abbr>{{ count }} из {{ count }} строк</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="myModal" class="reveal-modal small">
        <h2 id="modalTitle">Изменение имени</h2>
        <div class="modal_error_msg"></div>
        <div class="modal_success_msg"></div>
        <div>
            <form class="change_ou_name ng-pristine ng-valid">
                <input type="hidden" name="csrfmiddlewaretoken" value="O8zZa9XZtwl0d8DCw4HXIvfsZLQTeRh6U6xM30rvUMW0fndA7V4mEkHReMCtYfUp" autocomplete="off">
                <input type="hidden" value="99" name="ouid" class="pk_id" autocomplete="off">
                <label>Корпус</label>
                <select size="1" name="edit_branch" id="id_edit_branch" class="edit_branch select2-hidden-accessible" style="width:100%"
                        data-select2-id="id_edit_branch" tabindex="-1" aria-hidden="true">

                </select>
                <span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="4" style="width: 100%;">
                        <span class="selection">
                            <span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0"
                                  aria-labelledby="select2-id_edit_branch-container">
                                <span class="select2-selection__rendered" id="select2-id_edit_branch-container" role="textbox" aria-readonly="true"></span>
                                <span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>
                            </span>
                        </span>
                        <span class="dropdown-wrapper" aria-hidden="true"></span>
                    </span>
                <div class="marginTop">
                    <label class="required">Название помещения</label>
                    <input type="text" class="ou_value" value="Изменяемый текст" name="ou_name">
                </div>
                <div class="marginTop">
                    <label>Комментарий</label>
                    <textarea cols="10" name="comment_modal" class="comment_modal" rows="30"></textarea>
                </div>
            </form>
        </div>
        <a class="close-reveal-modal" aria-label="Close">×</a>
        <div class="right">
            <img class="spinner_ou" src="static/img/loader.gif">
            <a class="button" aria-label="Close">Закрыть</a>
            <a class="button edit_save_and_close">Сохранить и закрыть</a>
        </div>
    </div>
    </div>
{% endblock %}
